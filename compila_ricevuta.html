<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Compila Ricevuta ESN Milano Statale</title>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Lato&display=swap');
        * {
            font-family: 'Lato', sans-serif;
        }

        header {
            display: grid;
            grid-template-columns: 10em auto;
        }

        div#esn-logo {
            grid-column: 1;
            width: 9em;
        }

        h1.title {
            margin-top: 1.8ex;
            grid-column: 2;
            font-family: "Kelson Sans", "Lato", "sans-serif";
        }

        main {
            width: 100%;
            height: 70ex;
        }

        #form-sec {
            width: 50%;
            background-color: rgb(184, 206, 206);
            float: left;
            height: inherit;
        }

        #form-sec>form {
            margin: 5em 10em auto 5em;
            display: grid;
            padding: 10px 120px 10px 10px;
            row-gap: 10px;
        }

        .labl-col1 {
            grid-column: 1;
            width: 9em;
        }

        .input-col2 {
            grid-column: 2;
            border-radius: 5px;
            font-family: inherit;
            padding: 0.25em 0.5em;
            background-color: #fff;
            border: 2px solid #8b8a8b;
            border-radius: 4px;
        }

        #preview-sec {
            width: 50%;
            background-color: bisque;
            height: inherit;
            overflow: scroll;
            float: right;
        }
    </style>
    <script>
        /*const backup_pdfprev = `
        <style>
            .page {
                width: 210mm;
                min-height: 297mm;
                padding: 20mm;
                margin: 10mm auto;
                border: 1px #D3D3D3 solid;
                border-radius: 5px;
                background: white;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            }
            .subpage {
                padding: 1cm;
                border: 5px red solid;
                height: 257mm;
                outline: 2cm #FFEAEA solid;
            }
    
            @page {
                size: A4;
                margin: 0;
            }
            @media print {
                html, body {
                    width: 210mm;
                    height: 297mm;        
                }
                .page {
                    margin: 0;
                    border: initial;
                    border-radius: initial;
                    width: initial;
                    min-height: initial;
                    box-shadow: initial;
                    background: initial;
                    page-break-after: always;
                }
            }
            </style>
            <div class="book">
                <div class="page">
                    <div class="subpage">Page 1/2</div>    
                    </div>
                    <div class="page">
        <div class="subpage">Page 2/2</div>    
        </div>
        </div>
        `*/
    </script>
</head>

<body>
    <header>
        <div id="esn-logo">
            <svg version="1.1" viewBox="0 0 297 210" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <clipPath id="clipPath30">
                        <path d="m0 80h144v-80h-144z" />
                    </clipPath>
                </defs>
                <g transform="translate(0,-87)">
                    <g transform="matrix(2.1899 0 0 -2.1899 17.838 236.02)">
                        <path d="m0 0v-.71h-4.541v6.242h4.398v-.709h-3.638v-2.014h2.831v-.71h-2.831v-2.099z"
                            style="fill:#040606" />
                    </g>
                    <g transform="matrix(2.1899 0 0 -2.1899 -9.6256 279.39)">
                        <g clip-path="url(#clipPath30)">
                            <g transform="translate(16.73 23.824)">
                                <path
                                    d="m0 0-.152-.738c-.153.083-.352.124-.599.124-.203 0-.4-.059-.594-.176-.193-.116-.351-.293-.474-.529-.124-.237-.186-.522-.186-.857v-2.553h-.76v4.729h.618l.104-.776c.266.581.772.871 1.521.871.227 0 .401-.032.522-.095"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(20.346 19.947)">
                                <path
                                    d="m0 0c.288.189.432.435.432.737v.654l-1.064-.2c-.425-.075-.741-.184-.95-.326-.209-.141-.314-.323-.314-.544 0-.196.077-.345.228-.449.152-.104.364-.156.637-.156.399 0 .742.095 1.031.284m1.933-.255-.047-.597c-.178-.063-.368-.095-.571-.095-.247 0-.441.055-.584.162-.142.107-.233.286-.271.538-.146-.219-.359-.392-.641-.515s-.578-.185-.888-.185c-.469 0-.855.109-1.16.327-.303.218-.456.531-.456.941 0 .36.16.671.476.931.316.263.775.444 1.377.545l1.264.208v.265c0 .314-.098.567-.294.756-.197.189-.469.284-.818.284-.316 0-.591-.076-.821-.227-.231-.151-.41-.375-.537-.672l-.561.407c.127.353.363.634.708.842s.749.313 1.211.313c.564 0 1.017-.137 1.359-.408s.513-.671.513-1.2v-2.328c0-.113.029-.198.085-.255.057-.056.149-.085.276-.085s.253.015.38.048"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(24.062 19.27)">
                                <path
                                    d="m0 0c-.367.18-.637.445-.808.799l.618.426c.107-.278.294-.486.56-.624.267-.14.58-.208.941-.208.374 0 .659.065.855.198.196.132.294.299.294.502 0 .182-.092.328-.275.439-.184.111-.507.206-.969.288-.456.082-.818.181-1.083.298-.266.117-.459.266-.579.445-.121.179-.181.402-.181.666 0 .259.076.495.228.71.152.214.371.386.655.516.285.128.614.194.988.194.507 0 .914-.093 1.221-.28.307-.186.527-.471.66-.856l-.646-.378c-.101.303-.254.52-.46.653-.207.132-.464.198-.775.198-.31 0-.573-.069-.788-.208-.216-.138-.323-.299-.323-.483 0-.208.094-.368.28-.482.187-.112.521-.211 1.002-.293.659-.107 1.124-.268 1.397-.482.272-.214.409-.517.409-.909 0-.27-.081-.511-.242-.723-.163-.211-.394-.377-.695-.496-.301-.12-.65-.181-1.05-.181-.455 0-.867.091-1.234.271"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(35.173 23.725)">
                                <path
                                    d="m0 0c.275-.129.499-.33.67-.601s.257-.605.257-1.003v-3.026h-.761v2.951c0 .409-.103.715-.309.913s-.476.297-.811.297c-.254 0-.486-.061-.698-.184-.213-.123-.384-.302-.514-.539-.13-.236-.194-.519-.194-.846v-2.592h-.76v2.951c0 .409-.104.715-.31.913-.205.198-.476.297-.811.297-.229 0-.45-.058-.665-.175-.216-.116-.393-.297-.532-.543-.14-.246-.209-.551-.209-.917v-2.526h-.76v4.729h.665l.047-.738c.165.277.382.485.651.625.269.139.559.208.869.208.348 0 .67-.079.964-.237.295-.157.518-.388.67-.69.14.302.367.533.684.69.317.158.639.237.969.237.317 0 .613-.066.888-.194"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(41.978 23.824)">
                                <path
                                    d="m0 0v-4.729h-.665l-.048.72c-.316-.543-.883-.815-1.7-.815-.513 0-.933.142-1.259.426s-.489.719-.489 1.305v3.093h.76v-2.895c0-.459.095-.786.285-.979.19-.192.469-.287.836-.287.437 0 .8.132 1.088.396.288.265.432.662.432 1.192v2.573z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(44.197 19.27)">
                                <path
                                    d="m0 0c-.367.18-.637.445-.808.799l.618.426c.107-.278.294-.486.56-.624.267-.14.58-.208.941-.208.374 0 .659.065.855.198.196.132.294.299.294.502 0 .182-.092.328-.275.439-.184.111-.507.206-.969.288-.456.082-.818.181-1.083.298-.266.117-.459.266-.579.445-.121.179-.181.402-.181.666 0 .259.076.495.228.71.152.214.371.386.655.516.285.128.614.194.988.194.507 0 .914-.093 1.221-.28.307-.186.527-.471.66-.856l-.646-.378c-.101.303-.254.52-.46.653-.207.132-.464.198-.775.198-.31 0-.573-.069-.788-.208-.216-.138-.323-.299-.323-.483 0-.208.094-.368.28-.482.187-.112.521-.211 1.002-.293.659-.107 1.124-.268 1.397-.482.272-.214.409-.517.409-.909 0-.27-.081-.511-.242-.723-.163-.211-.394-.377-.695-.496-.301-.12-.65-.181-1.05-.181-.455 0-.867.091-1.234.271"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(58.476 24.108)">
                                <path
                                    d="m0 0-.656-.53c-.19.416-.416.711-.679.884-.263.174-.622.261-1.078.261-.482 0-.86-.099-1.136-.298-.275-.198-.413-.453-.413-.762 0-.201.054-.368.161-.501.109-.132.287-.248.537-.345s.597-.185 1.04-.261c.83-.137 1.417-.345 1.763-.624.345-.277.518-.661.518-1.153 0-.354-.1-.664-.299-.931-.2-.268-.484-.476-.851-.624-.367-.149-.792-.224-1.273-.224-.633 0-1.173.124-1.619.37-.448.245-.787.573-1.022.984l.655.528c.171-.371.423-.66.756-.865.332-.204.748-.307 1.249-.307.494 0 .887.089 1.178.27.291.179.438.434.438.76 0 .279-.127.499-.381.663-.253.164-.702.303-1.349.416-.836.145-1.428.353-1.776.625-.349.27-.523.649-.523 1.134 0 .334.095.643.285.927s.462.509.817.676c.354.168.766.251 1.235.251 1.121 0 1.929-.441 2.423-1.324"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(63.117 19.426)">
                                <path
                                    d="m0 0c-.316-.284-.725-.426-1.225-.426-.386 0-.702.105-.945.313-.244.208-.369.526-.376.955v2.904h-.949v.652h.949v1.136l.761.208v-1.344h1.757v-.652h-1.757v-2.772c0-.226.064-.398.194-.515s.303-.175.518-.175c.304 0 .573.116.807.35z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(68.481 23.824)">
                                <path
                                    d="m0 0v-4.729h-.665l-.048.72c-.316-.543-.883-.815-1.7-.815-.513 0-.933.142-1.259.426s-.489.719-.489 1.305v3.093h.76v-2.895c0-.459.095-.786.285-.979.19-.192.469-.287.836-.287.437 0 .8.132 1.088.396.288.265.432.662.432 1.192v2.573z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(73.369 20.136)">
                                <path
                                    d="m0 0c.27.315.404.738.404 1.268v.112c0 .53-.134.953-.404 1.268-.269.315-.632.473-1.088.473-.462 0-.826-.162-1.092-.486-.266-.326-.399-.763-.399-1.311s.133-.986.399-1.311.63-.486 1.092-.486c.456 0 .819.158 1.088.473m1.164 5.864v-6.905h-.665l-.048.823c-.139-.277-.352-.5-.64-.667-.289-.166-.617-.251-.984-.251-.665 0-1.192.22-1.582.658-.39.439-.584 1.039-.584 1.802 0 .762.194 1.363.584 1.801.39.439.917.659 1.582.659.348 0 .66-.076.936-.228.275-.152.489-.354.641-.605v2.913z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(77.303 22.888)">
                                <path
                                    d="m0 0c-.257-.246-.413-.592-.471-1.04h2.879c-.051.44-.196.787-.437 1.035-.241.249-.56.374-.959.374-.418 0-.755-.123-1.012-.369m3.102-1.712h-3.581c.043-.479.204-.851.479-1.116.275-.264.632-.397 1.068-.397.349 0 .639.059.869.179.232.121.389.294.471.522l.637-.332c-.191-.334-.443-.59-.761-.766-.316-.176-.722-.266-1.216-.266-.715 0-1.277.218-1.685.654-.409.435-.613 1.036-.613 1.806 0 .769.195 1.371.584 1.806.389.436.942.654 1.658.654.443 0 .826-.099 1.149-.294.323-.196.567-.461.732-.795.165-.335.247-.709.247-1.125 0-.176-.013-.353-.038-.53"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(85.609 23.455)">
                                <path
                                    d="m0 0c.348-.308.522-.752.522-1.333v-3.026h-.76v2.761c0 .492-.106.848-.319 1.069-.212.221-.495.331-.849.331-.254 0-.491-.054-.713-.165s-.403-.29-.546-.539-.214-.563-.214-.941v-2.516h-.76v4.729h.665l.047-.738c.158.284.377.493.656.629s.592.204.941.204c.538 0 .981-.156 1.33-.465"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(90.794 19.426)">
                                <path
                                    d="m0 0c-.316-.284-.725-.426-1.225-.426-.386 0-.702.105-.945.313-.244.208-.369.526-.376.955v2.904h-.949v.652h.949v1.136l.761.208v-1.344h1.757v-.652h-1.757v-2.772c0-.226.064-.398.194-.515s.303-.175.518-.175c.304 0 .573.116.807.35z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(101.77 19.095)">
                                <path
                                    d="m0 0h-.94l-2.623 4.181-.665 1.229h-.009l.038-1.003v-4.407h-.722v6.242h.941l2.612-4.161.675-1.248h.008l-.038 1.001v4.408h.723z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(104.69 22.888)">
                                <path
                                    d="m0 0c-.257-.246-.413-.592-.471-1.04h2.879c-.051.44-.196.787-.437 1.035-.241.249-.56.374-.959.374-.418 0-.755-.123-1.012-.369m3.102-1.712h-3.581c.043-.479.204-.851.479-1.116.275-.264.632-.397 1.068-.397.349 0 .639.059.869.179.232.121.389.294.471.522l.637-.332c-.191-.334-.443-.59-.761-.766-.316-.176-.722-.266-1.216-.266-.715 0-1.277.218-1.685.654-.409.435-.613 1.036-.613 1.806 0 .769.195 1.371.584 1.806.389.436.942.654 1.658.654.443 0 .826-.099 1.149-.294.323-.196.567-.461.732-.795.165-.335.247-.709.247-1.125 0-.176-.013-.353-.038-.53"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(112.26 19.426)">
                                <path
                                    d="m0 0c-.316-.284-.725-.426-1.225-.426-.386 0-.702.105-.945.313-.244.208-.369.526-.376.955v2.904h-.949v.652h.949v1.136l.761.208v-1.344h1.757v-.652h-1.757v-2.772c0-.226.064-.398.194-.515s.303-.175.518-.175c.304 0 .573.116.807.35z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(120.64 23.824)">
                                <path
                                    d="m0 0-1.652-4.729h-.761l-1.339 3.765-1.264-3.765h-.759l-1.654 4.729h.846l1.196-3.85 1.292 3.85h.761l1.292-3.85 1.196 3.85z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(122.72 22.784)">
                                <path
                                    d="m0 0c-.272-.322-.409-.763-.409-1.324 0-.562.137-1.002.409-1.324.271-.321.648-.482 1.13-.482.481 0 .858.161 1.131.482.272.322.408.762.408 1.324 0 .561-.136 1.002-.408 1.324-.273.321-.65.482-1.131.482-.482 0-.859-.161-1.13-.482m2.816.482c.409-.435.613-1.037.613-1.806 0-.77-.204-1.371-.613-1.806-.408-.436-.97-.654-1.686-.654s-1.277.218-1.686.654c-.409.435-.613 1.036-.613 1.806 0 .769.204 1.371.613 1.806.409.436.97.654 1.686.654s1.278-.218 1.686-.654"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(130.46 23.824)">
                                <path
                                    d="m0 0-.152-.738c-.153.083-.352.124-.599.124-.203 0-.4-.059-.594-.176-.193-.116-.351-.293-.474-.529-.124-.237-.186-.522-.186-.857v-2.553h-.76v4.729h.618l.104-.776c.266.581.772.871 1.521.871.227 0 .401-.032.522-.095"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(133.48 21.432)">
                                <path
                                    d="m0 0-1.007-1.002v-1.334h-.76v6.904h.76v-4.626l2.46 2.451h.95l-1.852-1.845 1.967-2.884h-.922z"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(77 39.975)">
                                <path
                                    d="m0 0v-2.974c0-.552-.448-1.001-1-1.001h-19c-.552 0-1 .449-1 1.001v29.99c0 .552.447 1.001 1 1.001l18 .008c.552.001 1-.447 1-1.001v-3.002c0-.553-.448-1.001-1-1.001h-14v-8.979h11c.552 0 1-.448 1-1.001v-3.002c0-.553-.448-1.001-1-1.001h-11v-8.037h15c.552 0 1-.448 1-1.001"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(116 36)">
                                <path
                                    d="m0 0h-2.96c-.552 0-.999.447-1 .999l-.039 30c-.001.552.447 1.001 1 1.001h4.403c.367 0 .705-.201.88-.524l12.716-23.474v22.998c0 .552.448 1 1.001 1h3c.552 0 1-.448 1-1v-29.971c0-.552-.448-1-1-1h-4.417c-.36 0-.693.194-.871.508l-12.713 22.47v-22.007c0-.552-.448-1-1-1"
                                    style="fill:#040606" />
                            </g>
                            <g transform="translate(31,71)">
                                <path
                                    d="m0 0v-11.76l-1.34-3.24h-3.32l-1.34 3.24v11.76c0 .552.448 1 1 1h4c.552 0 1-.448 1-1"
                                    style="fill:#6cc747" />
                            </g>
                            <g transform="translate(16.707,67.312)">
                                <path
                                    d="m0 0 8.295-8.071 1.343-3.239-2.347-2.347-3.239 1.343-8.071 8.295c-.381.392-.377 1.018.01 1.405l2.604 2.604c.387.387 1.013.391 1.405.01"
                                    style="fill:#4eafe6" />
                            </g>
                            <g transform="translate(9,55)">
                                <path
                                    d="m0 0h11.76l3.24-1.34v-3.32l-3.24-1.34h-11.76c-.552 0-1 .448-1 1v4c0 .552.448 1 1 1"
                                    style="fill:#e71294" />
                            </g>
                            <g transform="translate(12.468 40.711)">
                                <path
                                    d="m0 0 8.291 8.291 3.238 1.343 2.348-2.347-1.343-3.239-8.319-8.094c-.382-.372-.99-.379-1.38-.015l-2.81 2.623c-.414.386-.425 1.038-.025 1.438"
                                    style="fill:#f46e25" />
                            </g>
                            <g transform="translate(25,33)">
                                <path
                                    d="m0 0v11.76l1.34 3.24h3.32l1.34-3.24v-11.76c0-.552-.448-1-1-1h-4c-.552 0-1 .448-1 1"
                                    style="fill:#4eafe6" />
                            </g>
                            <g transform="translate(39.293,36.688)">
                                <path
                                    d="m0 0-8.295 8.071-1.343 3.239 2.347 2.347 3.239-1.343 8.071-8.295c.381-.392.377-1.018-.01-1.405l-2.604-2.604c-.387-.387-1.013-.391-1.405-.01"
                                    style="fill:#6cc747" />
                            </g>
                            <g transform="translate(47,49)">
                                <path
                                    d="m0 0h-11.76l-3.24 1.34v3.32l3.24 1.34h11.76c.552 0 1-.448 1-1v-4c0-.552-.448-1-1-1"
                                    style="fill:#f46e25" />
                            </g>
                            <g transform="translate(43.312,63.293)">
                                <path
                                    d="m0 0-8.071-8.295-3.239-1.343-2.347 2.347 1.343 3.239 8.295 8.071c.392.381 1.018.377 1.405-.01l2.604-2.604c.387-.387.391-1.013.01-1.405"
                                    style="fill:#e71294" />
                            </g>
                            <g transform="translate(106.08 44.7)">
                                <path
                                    d="m0 0c0-1.86-.514-3.51-1.521-4.93-.997-1.4-2.427-2.5-4.26-3.27-1.802-.76-3.907-1.15-6.264-1.15-3.082 0-5.771.64-7.967 1.9-1.28.744-2.447 1.813-3.399 2.918-.38.44-.306 1.109.159 1.457l2.324 1.743c.451.339 1.085.229 1.418-.227.524-.717 1.093-1.301 1.885-1.811 1.491-.96 3.404-1.45 5.67-1.45 2.246 0 4.039.42 5.338 1.26 1.249.8 1.853 1.91 1.853 3.37 0 1.21-.524 2.16-1.591 2.88-1.138.77-3.233 1.44-6.234 1.99-.534.1-1.048.2-1.531.31-3.283.72-5.63 1.67-7.151 2.9-1.772 1.44-2.679 3.47-2.679 6.04 0 1.75.484 3.39 1.441 4.88.947 1.48 2.326 2.67 4.089 3.54 1.752.86 3.807 1.3 6.113 1.3 4.953 0 9.16-1.839 11.691-5.51.311-.452.231-1.065-.208-1.394l-2.358-1.768c-.468-.352-1.126-.217-1.446.272-.873 1.337-1.848 2.009-2.794 2.66-1.159.81-2.79 1.21-4.845 1.21-2.165 0-3.887-.46-5.106-1.38-1.189-.9-1.762-2.01-1.762-3.39 0-.9.211-1.62.664-2.19.453-.58 1.249-1.11 2.347-1.56 1.148-.47 2.78-.89 4.854-1.26.554-.1 1.088-.2 1.591-.32 3.233-.69 5.54-1.65 7.04-2.9 1.753-1.47 2.639-3.53 2.639-6.12"
                                    style="fill:#040606" />
                            </g>
                        </g>
                    </g>
                    <path
                        d="m149.26 261.91h-4.0847v-10.661l-2.9513 6.9184h-2.8336l-2.9513-6.9184v10.661h-3.8709v-15.922h4.7691l3.5822 7.9877 3.5715-7.9877h4.7691z"
                        style="fill:#040606" />
                    <path d="m156.13 261.91h-3.8495v-12.008h3.8495zm.10693-13.719h-4.0634v-2.9192h4.0634z"
                        style="fill:#040606" />
                    <path d="m162.5 261.91h-3.8495v-16.638h3.8495z" style="fill:#040606" />
                    <path
                        d="m173.13 258.78v-2.5022q-.78059.0642-1.6895.18178-.90891.10693-1.3794.25664-.57742.18178-.88752.53465-.2994.34217-.2994.90891 0 .37425.0642.6095.0642.23524.32079.4491.24594.21387.58812.3208.34218.0962 1.0693.0962.57743 0 1.1655-.23524.59881-.23525 1.0479-.6202zm0 1.8606q-.3101.23524-.7699.56673-.4598.33148-.86613.52396-.56673.25663-1.1762.37425-.6095.12832-1.3366.12832-1.7109 0-2.8657-1.0586-1.1548-1.0586-1.1548-2.7053 0-1.3152.58811-2.1493.58812-.83405 1.6681-1.3152 1.0693-.48118 2.6519-.68435 1.5826-.20317 3.2828-.29941v-.0642q0-.99446-.81267-1.3687-.81267-.38495-2.3952-.38495-.95168 0-2.0317.34218-1.08.33148-1.5505.51326h-.35287v-2.8978q.60951-.16039 1.9782-.37425 1.3794-.22456 2.7588-.22456 3.2828 0 4.737 1.0158 1.4649 1.0051 1.4649 3.1651v8.1695h-3.8174z"
                        style="fill:#040606" />
                    <path
                        d="m190.64 261.91h-3.8709v-5.956q0-.72712-.0748-1.4436-.0748-.72712-.25663-1.0693-.21386-.39564-.63089-.57742-.40634-.18178-1.1442-.18178-.52395 0-1.0693.17108-.53465.17109-1.1655.54535v8.5116h-3.8495v-12.008h3.8495v1.3259q1.0265-.80197 1.9675-1.2297.95168-.42773 2.1065-.42773 1.9461 0 3.0368 1.1335 1.1014 1.1335 1.1014 3.3897z"
                        style="fill:#040606" />
                    <path
                        d="m204.43 255.91q0 2.962-1.7323 4.6728-1.7216 1.7002-4.8439 1.7002t-4.8546-1.7002q-1.7216-1.7109-1.7216-4.6728 0-2.9834 1.7323-4.6836 1.743-1.7002 4.8439-1.7002 3.1438 0 4.8546 1.7109 1.7216 1.7109 1.7216 4.6728zm-4.737 2.9192q.37426-.4598.55604-1.1014.19247-.65227.19247-1.7964 0-1.0586-.19247-1.775-.19248-.71643-.53465-1.1442-.34218-.43841-.82337-.6202-.48118-.18178-1.0372-.18178t-.99445.1497q-.42772.14971-.82336.59881-.35287.41703-.56673 1.1442-.20317.72712-.20317 1.8285 0 .98375.18178 1.7109.18178.71643.53465 1.1548.34218.41702.81267.6095.48119.19247 1.0907.19247.52396 0 .99445-.17108.48119-.18179.81267-.59881z"
                        style="fill:#040606" />
                    <path
                        d="m224.56 256.91q0 2.3525-1.9996 3.8281-1.9889 1.465-5.4107 1.465-1.9782 0-3.4538-.34218-1.465-.35287-2.7481-.88752v-3.8174h.4491q1.2725 1.0158 2.8444 1.5612 1.5826.54535 3.0368.54535.37426 0 .98376-.0642t.99445-.21386q.47049-.19248.7699-.48119.31009-.28871.31009-.85544 0-.52396-.4491-.89821-.43842-.38495-1.2939-.58812-.89821-.21386-1.9034-.39564-.99445-.19248-1.8713-.48119-2.0103-.65227-2.8978-1.7644-.87683-1.1228-.87683-2.7802 0-2.2241 1.9889-3.6249 1.9996-1.4115 5.1326-1.4115 1.5719 0 3.101.3101 1.5398.2994 2.6626.7592v3.6677h-.43841q-.96237-.7699-2.3632-1.2832-1.3901-.52396-2.8444-.52396-.51326 0-1.0265.0748-.50257.0642-.97306.25663-.41703.1604-.71643.49188-.29941.32079-.29941.73782 0 .63089.48119.97307.48118.33148 1.8178.6095.87683.18178 1.6788.35287.81267.17109 1.743.47049 1.8285.59881 2.6946 1.636.87683 1.0265.87683 2.6733z"
                        style="fill:#040606" />
                    <path
                        d="m233.38 261.81q-.6202.16039-1.3152.24594-.69505.0962-1.7002.0962-2.2455 0-3.3469-.9089-1.0907-.90891-1.0907-3.1117v-5.6138h-1.5826v-2.6091h1.5826v-3.4325h3.8495v3.4325h3.6036v2.6091h-3.6036v4.2558q0 .63089.0107 1.1014.0107.4705.17109.84475.1497.37426.52396.59881.38495.21386 1.1121.21386.29941 0 .7806-.12831.49187-.12832.68435-.23525h.32079z"
                        style="fill:#040606" />
                    <path
                        d="m242.68 258.78v-2.5022q-.7806.0642-1.6895.18178-.90891.10693-1.3794.25664-.57743.18178-.88752.53465-.29941.34217-.29941.90891 0 .37425.0642.6095.0642.23524.32079.4491.24594.21387.58812.3208.34217.0962 1.0693.0962.57742 0 1.1655-.23524.59881-.23525 1.0479-.6202zm0 1.8606q-.3101.23524-.7699.56673-.4598.33148-.86614.52396-.56673.25663-1.1762.37425-.6095.12832-1.3366.12832-1.7109 0-2.8657-1.0586t-1.1548-2.7053q0-1.3152.58812-2.1493.58812-.83405 1.6681-1.3152 1.0693-.48118 2.6519-.68435t3.2828-.29941v-.0642q0-.99446-.81267-1.3687-.81267-.38495-2.3952-.38495-.95168 0-2.0317.34218-1.08.33148-1.5505.51326h-.35287v-2.8978q.6095-.16039 1.9782-.37425 1.3794-.22456 2.7588-.22456 3.2828 0 4.737 1.0158 1.465 1.0051 1.465 3.1651v8.1695h-3.8174z"
                        style="fill:#040606" />
                    <path
                        d="m255.37 261.81q-.6202.16039-1.3152.24594-.69505.0962-1.7002.0962-2.2455 0-3.3469-.9089-1.0907-.90891-1.0907-3.1117v-5.6138h-1.5826v-2.6091h1.5826v-3.4325h3.8495v3.4325h3.6036v2.6091h-3.6036v4.2558q0 .63089.0107 1.1014.0107.4705.17109.84475.1497.37426.52396.59881.38495.21386 1.1121.21386.29941 0 .78059-.12831.49188-.12832.68436-.23525h.32079z"
                        style="fill:#040606" />
                    <path
                        d="m264.67 258.78v-2.5022q-.78059.0642-1.6895.18178-.90891.10693-1.3794.25664-.57743.18178-.88753.53465-.2994.34217-.2994.90891 0 .37425.0642.6095.0642.23524.32079.4491.24594.21387.58811.3208.34218.0962 1.0693.0962.57742 0 1.1655-.23524.59881-.23525 1.0479-.6202zm0 1.8606q-.31009.23524-.76989.56673-.4598.33148-.86614.52396-.56673.25663-1.1762.37425-.6095.12832-1.3366.12832-1.7109 0-2.8657-1.0586t-1.1548-2.7053q0-1.3152.58812-2.1493.58811-.83405 1.6681-1.3152 1.0693-.48118 2.6519-.68435t3.2828-.29941v-.0642q0-.99446-.81267-1.3687-.81267-.38495-2.3952-.38495-.95168 0-2.0317.34218-1.08.33148-1.5505.51326h-.35287v-2.8978q.6095-.16039 1.9782-.37425 1.3794-.22456 2.7588-.22456 3.2828 0 4.737 1.0158 1.4649 1.0051 1.4649 3.1651v8.1695h-3.8174z"
                        style="fill:#040606" />
                    <path d="m273.97 261.91h-3.8495v-16.638h3.8495z" style="fill:#040606" />
                    <path
                        d="m289.11 256.62h-8.8111q.0856 1.4115 1.0693 2.16.99446.74851 2.9192.74851 1.219 0 2.3632-.43841 1.1442-.43842 1.8071-.94099h.42772v3.0903q-1.3046.52396-2.4594.7592-1.1548.23525-2.5556.23525-3.6142 0-5.539-1.6253-1.9247-1.6253-1.9247-4.6301 0-2.9727 1.8178-4.7049 1.8285-1.743 5.0043-1.743 2.9299 0 4.4055 1.4863 1.4756 1.4756 1.4756 4.2558zm-3.8281-2.2562q-.0321-1.2083-.59881-1.8178-.56673-.60951-1.7644-.60951-1.1121 0-1.8285.57743-.71644.57742-.80198 1.8499z"
                        style="fill:#040606" />
                </g>
            </svg>
        </div>

        <h1 class="title">Compila Ricevuta ESN Milano Statale</h1>
    </header>
    <main>
        <section id="form-sec">
            <form>
                <label class="labl-col1" for="anno_fiscale">Anno fiscale</label>
                <input class="input-col2" type="text" name="anno_fiscale" value="2022" readonly>
                <label class="labl-col1" for="numero_ricevuta">Numero di ricevuta</label>
                <input class="input-col2" type="number" min="1" name="numero_ricevuta" placeholder="Numero di ricevuta">
                <label class="labl-col1" for="data_rilascio">Data di rilascio</label>
                <input class="input-col2" type="date" name="data_rilascio" today>
                <label class="labl-col1" for="causale">Causale</label>
                <input class="input-col2" type="text" name="causale" placeholder="Causale">
                <label class="labl-col1" for="tipo_ricevuta">Tipo di ricevuta</label>
                <select class="input-col2" name="tipo_ricevuta">
                    <option value="entrata">Entrata</option>
                    <option value="uscita">Uscita</option>
                </select>
                <label class="labl-col1" for="importo">Importo</label>
                <input class="input-col2" type="number" name="importo" value="0" placeholder="Importo">
                <label class="labl-col1" for="nome_acquirente">Nome Acquirente</label>
                <input class="input-col2" type="text" name="nome_acquirente" placeholder="Nome Acquirente">
                <label class="labl-col1" for="canale">Canale</label>
                <select class="input-col2" name="canale">
                    <option value="contanti" default>Contanti</option>
                    <option value="bonifico">Bonifico</option>
                    <option value="Verse">Verse</option>
                </select>
                <button type="button" class="labl-col1" id="download-btn">Download</button>
                <button typre="reset" class="labl-col1" id="clear-btn" onclick="clear_inputs()">Pulisci </button>
                <button class="labl-col1" onclick="inputs_for_membership_fee()" disabled>Quota associativa</button>
            </form>
        </section>
        <section id="preview-sec"></section>
    </main>
</body>
<!-- TODO for pdf dwl <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js" integrity="sha384-THVO/sM0mFD9h7dfSndI6TS0PgAGavwKvB5hAxRRvc0o9cPLohB0wb/PTA7LdUHs" crossorigin="anonymous"></script>-->
<script>
    const form_inputs = document.querySelectorAll(".input-col2")
    const download_btn = document.getElementById("download-btn")

    class Fattura {
        constructor() {
            this.pdfprev_container = document.getElementById("preview-sec")
            this.html_pdfprev = ""
            this.dati = {}
        }

        validate_dati() {
            // TODO mostra quali campi devono essere modificati in caso di errore
            if (this.dati.anno_fiscale == "" || this.dati.anno_fiscale.length != 4) {
                return false
            }
            if (this.dati.canale == "") {
                return false
            }
            if (this.dati.causale == "") {
                return false
            }
            if (this.dati.data_rilascio == "gg/mm/aaaa" || this.dati.data_rilascio == "") {
                return false
            }
            if (this.dati.importo == "0" || this.dati.importo == "") {
                return false
            }
            if (this.dati.importo > 0 && this.dati.tipo_ricevuta == "uscita") {
                return false
            }
            if (this.dati.importo < 0 && this.dati.tipo_ricevuta == "entrata") {
                return false
            }
            if (this.dati.nome_acquirente == "") {
                return false
            }
            if (this.dati.numero_ricevuta == "" || this.dati.numero_ricevuta < 1) {
                return false
            }
            if (this.dati.tipo_ricevuta == "") {
                return false
            }
            return true
        }

        put(form_inputs) {
            let dati = {}
            form_inputs.forEach((el) => {
                if (el.name == "data_rilascio") {
                    if (el.value != "") {
                        let to_date = new Date(el.value)
                        dati[el.name] = to_date.toLocaleDateString()
                    }
                    else {
                        dati[el.name] = "gg/mm/aaaa"
                    }
                }
                else {
                    dati[el.name] = el.value
                }
            })
            this.dati = dati
            this.put_into_template()
        }

        put_into_template() {
            let dati = this.dati
            let persona_dare_avere = ""
            if (dati.tipo_ricevuta == "entrata") {
                if (dati.importo >= 0) {
                    persona_dare_avere = `<td>Ricevuti da:</td> <td>${dati.nome_acquirente}</td>`
                }
                else {
                    persona_dare_avere = "<td>Errore nell'importo! Questa è un'entrata!</td><td></td>"
                }
            }
            else {
                if (dati.importo <= 0) {
                    persona_dare_avere = `<td>Consegnati a:</td> <td>${dati.nome_acquirente}</td>`
                }
                else {
                    persona_dare_avere = "<td>Errore nell'importo! Questa è un'uscita!</td><td></td>"
                }
            }

            const pdfprev = `
                <head>
                    <title>Ricevuta_${dati.anno_fiscale}-${dati.numero_ricevuta}</title>
                </head>
                <style>
                    .page {
                        width: 210mm;
                        min-height: 297mm;
                        padding: 20mm;
                        margin: 10mm auto;
                        border: 1px #D3D3D3 solid;
                        border-radius: 5px;
                        background: white;
                        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
                    }
                    .subpage {
                        padding: 1cm;
                        /*border: 5px red solid;*/
                        height: 257mm;
                        /*outline: 2cm #FFEAEA solid;*/
                    }
            
                    @page {
                        size: A4;
                        margin: 0;
                    }
                    @media print {
                        html, body {
                            width: 210mm;
                            height: 297mm;        
                        }
                        .page {
                            margin: 0;
                            border: initial;
                            border-radius: initial;
                            width: initial;
                            min-height: initial;
                            box-shadow: initial;
                            background: initial;
                            page-break-after: always;
                        }
                    }
                    </style>
                    <div class="book">
                        <div class="page">
                            <div class="subpage">
                                <table>
                                    <tr>
                                        <td>
                                            <div style="width: 13em">
                                                            <svg version="1.1" viewBox="0 0 297 210" xmlns="http://www.w3.org/2000/svg">
                                                                <defs>
                                                                    <clipPath id="clipPath30">
                                                                        <path d="m0 80h144v-80h-144z" />
                                                                    </clipPath>
                                                                </defs>
                                                                <g transform="translate(0,-87)">
                                                                    <g transform="matrix(2.1899 0 0 -2.1899 17.838 236.02)">
                                                                        <path d="m0 0v-.71h-4.541v6.242h4.398v-.709h-3.638v-2.014h2.831v-.71h-2.831v-2.099z"
                                                                            style="fill:#040606" />
                                                                    </g>
                                                                    <g transform="matrix(2.1899 0 0 -2.1899 -9.6256 279.39)">
                                                                        <g clip-path="url(#clipPath30)">
                                                                            <g transform="translate(16.73 23.824)">
                                                                                <path
                                                                                    d="m0 0-.152-.738c-.153.083-.352.124-.599.124-.203 0-.4-.059-.594-.176-.193-.116-.351-.293-.474-.529-.124-.237-.186-.522-.186-.857v-2.553h-.76v4.729h.618l.104-.776c.266.581.772.871 1.521.871.227 0 .401-.032.522-.095"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(20.346 19.947)">
                                                                                <path
                                                                                    d="m0 0c.288.189.432.435.432.737v.654l-1.064-.2c-.425-.075-.741-.184-.95-.326-.209-.141-.314-.323-.314-.544 0-.196.077-.345.228-.449.152-.104.364-.156.637-.156.399 0 .742.095 1.031.284m1.933-.255-.047-.597c-.178-.063-.368-.095-.571-.095-.247 0-.441.055-.584.162-.142.107-.233.286-.271.538-.146-.219-.359-.392-.641-.515s-.578-.185-.888-.185c-.469 0-.855.109-1.16.327-.303.218-.456.531-.456.941 0 .36.16.671.476.931.316.263.775.444 1.377.545l1.264.208v.265c0 .314-.098.567-.294.756-.197.189-.469.284-.818.284-.316 0-.591-.076-.821-.227-.231-.151-.41-.375-.537-.672l-.561.407c.127.353.363.634.708.842s.749.313 1.211.313c.564 0 1.017-.137 1.359-.408s.513-.671.513-1.2v-2.328c0-.113.029-.198.085-.255.057-.056.149-.085.276-.085s.253.015.38.048"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(24.062 19.27)">
                                                                                <path
                                                                                    d="m0 0c-.367.18-.637.445-.808.799l.618.426c.107-.278.294-.486.56-.624.267-.14.58-.208.941-.208.374 0 .659.065.855.198.196.132.294.299.294.502 0 .182-.092.328-.275.439-.184.111-.507.206-.969.288-.456.082-.818.181-1.083.298-.266.117-.459.266-.579.445-.121.179-.181.402-.181.666 0 .259.076.495.228.71.152.214.371.386.655.516.285.128.614.194.988.194.507 0 .914-.093 1.221-.28.307-.186.527-.471.66-.856l-.646-.378c-.101.303-.254.52-.46.653-.207.132-.464.198-.775.198-.31 0-.573-.069-.788-.208-.216-.138-.323-.299-.323-.483 0-.208.094-.368.28-.482.187-.112.521-.211 1.002-.293.659-.107 1.124-.268 1.397-.482.272-.214.409-.517.409-.909 0-.27-.081-.511-.242-.723-.163-.211-.394-.377-.695-.496-.301-.12-.65-.181-1.05-.181-.455 0-.867.091-1.234.271"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(35.173 23.725)">
                                                                                <path
                                                                                    d="m0 0c.275-.129.499-.33.67-.601s.257-.605.257-1.003v-3.026h-.761v2.951c0 .409-.103.715-.309.913s-.476.297-.811.297c-.254 0-.486-.061-.698-.184-.213-.123-.384-.302-.514-.539-.13-.236-.194-.519-.194-.846v-2.592h-.76v2.951c0 .409-.104.715-.31.913-.205.198-.476.297-.811.297-.229 0-.45-.058-.665-.175-.216-.116-.393-.297-.532-.543-.14-.246-.209-.551-.209-.917v-2.526h-.76v4.729h.665l.047-.738c.165.277.382.485.651.625.269.139.559.208.869.208.348 0 .67-.079.964-.237.295-.157.518-.388.67-.69.14.302.367.533.684.69.317.158.639.237.969.237.317 0 .613-.066.888-.194"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(41.978 23.824)">
                                                                                <path
                                                                                    d="m0 0v-4.729h-.665l-.048.72c-.316-.543-.883-.815-1.7-.815-.513 0-.933.142-1.259.426s-.489.719-.489 1.305v3.093h.76v-2.895c0-.459.095-.786.285-.979.19-.192.469-.287.836-.287.437 0 .8.132 1.088.396.288.265.432.662.432 1.192v2.573z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(44.197 19.27)">
                                                                                <path
                                                                                    d="m0 0c-.367.18-.637.445-.808.799l.618.426c.107-.278.294-.486.56-.624.267-.14.58-.208.941-.208.374 0 .659.065.855.198.196.132.294.299.294.502 0 .182-.092.328-.275.439-.184.111-.507.206-.969.288-.456.082-.818.181-1.083.298-.266.117-.459.266-.579.445-.121.179-.181.402-.181.666 0 .259.076.495.228.71.152.214.371.386.655.516.285.128.614.194.988.194.507 0 .914-.093 1.221-.28.307-.186.527-.471.66-.856l-.646-.378c-.101.303-.254.52-.46.653-.207.132-.464.198-.775.198-.31 0-.573-.069-.788-.208-.216-.138-.323-.299-.323-.483 0-.208.094-.368.28-.482.187-.112.521-.211 1.002-.293.659-.107 1.124-.268 1.397-.482.272-.214.409-.517.409-.909 0-.27-.081-.511-.242-.723-.163-.211-.394-.377-.695-.496-.301-.12-.65-.181-1.05-.181-.455 0-.867.091-1.234.271"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(58.476 24.108)">
                                                                                <path
                                                                                    d="m0 0-.656-.53c-.19.416-.416.711-.679.884-.263.174-.622.261-1.078.261-.482 0-.86-.099-1.136-.298-.275-.198-.413-.453-.413-.762 0-.201.054-.368.161-.501.109-.132.287-.248.537-.345s.597-.185 1.04-.261c.83-.137 1.417-.345 1.763-.624.345-.277.518-.661.518-1.153 0-.354-.1-.664-.299-.931-.2-.268-.484-.476-.851-.624-.367-.149-.792-.224-1.273-.224-.633 0-1.173.124-1.619.37-.448.245-.787.573-1.022.984l.655.528c.171-.371.423-.66.756-.865.332-.204.748-.307 1.249-.307.494 0 .887.089 1.178.27.291.179.438.434.438.76 0 .279-.127.499-.381.663-.253.164-.702.303-1.349.416-.836.145-1.428.353-1.776.625-.349.27-.523.649-.523 1.134 0 .334.095.643.285.927s.462.509.817.676c.354.168.766.251 1.235.251 1.121 0 1.929-.441 2.423-1.324"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(63.117 19.426)">
                                                                                <path
                                                                                    d="m0 0c-.316-.284-.725-.426-1.225-.426-.386 0-.702.105-.945.313-.244.208-.369.526-.376.955v2.904h-.949v.652h.949v1.136l.761.208v-1.344h1.757v-.652h-1.757v-2.772c0-.226.064-.398.194-.515s.303-.175.518-.175c.304 0 .573.116.807.35z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(68.481 23.824)">
                                                                                <path
                                                                                    d="m0 0v-4.729h-.665l-.048.72c-.316-.543-.883-.815-1.7-.815-.513 0-.933.142-1.259.426s-.489.719-.489 1.305v3.093h.76v-2.895c0-.459.095-.786.285-.979.19-.192.469-.287.836-.287.437 0 .8.132 1.088.396.288.265.432.662.432 1.192v2.573z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(73.369 20.136)">
                                                                                <path
                                                                                    d="m0 0c.27.315.404.738.404 1.268v.112c0 .53-.134.953-.404 1.268-.269.315-.632.473-1.088.473-.462 0-.826-.162-1.092-.486-.266-.326-.399-.763-.399-1.311s.133-.986.399-1.311.63-.486 1.092-.486c.456 0 .819.158 1.088.473m1.164 5.864v-6.905h-.665l-.048.823c-.139-.277-.352-.5-.64-.667-.289-.166-.617-.251-.984-.251-.665 0-1.192.22-1.582.658-.39.439-.584 1.039-.584 1.802 0 .762.194 1.363.584 1.801.39.439.917.659 1.582.659.348 0 .66-.076.936-.228.275-.152.489-.354.641-.605v2.913z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(77.303 22.888)">
                                                                                <path
                                                                                    d="m0 0c-.257-.246-.413-.592-.471-1.04h2.879c-.051.44-.196.787-.437 1.035-.241.249-.56.374-.959.374-.418 0-.755-.123-1.012-.369m3.102-1.712h-3.581c.043-.479.204-.851.479-1.116.275-.264.632-.397 1.068-.397.349 0 .639.059.869.179.232.121.389.294.471.522l.637-.332c-.191-.334-.443-.59-.761-.766-.316-.176-.722-.266-1.216-.266-.715 0-1.277.218-1.685.654-.409.435-.613 1.036-.613 1.806 0 .769.195 1.371.584 1.806.389.436.942.654 1.658.654.443 0 .826-.099 1.149-.294.323-.196.567-.461.732-.795.165-.335.247-.709.247-1.125 0-.176-.013-.353-.038-.53"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(85.609 23.455)">
                                                                                <path
                                                                                    d="m0 0c.348-.308.522-.752.522-1.333v-3.026h-.76v2.761c0 .492-.106.848-.319 1.069-.212.221-.495.331-.849.331-.254 0-.491-.054-.713-.165s-.403-.29-.546-.539-.214-.563-.214-.941v-2.516h-.76v4.729h.665l.047-.738c.158.284.377.493.656.629s.592.204.941.204c.538 0 .981-.156 1.33-.465"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(90.794 19.426)">
                                                                                <path
                                                                                    d="m0 0c-.316-.284-.725-.426-1.225-.426-.386 0-.702.105-.945.313-.244.208-.369.526-.376.955v2.904h-.949v.652h.949v1.136l.761.208v-1.344h1.757v-.652h-1.757v-2.772c0-.226.064-.398.194-.515s.303-.175.518-.175c.304 0 .573.116.807.35z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(101.77 19.095)">
                                                                                <path
                                                                                    d="m0 0h-.94l-2.623 4.181-.665 1.229h-.009l.038-1.003v-4.407h-.722v6.242h.941l2.612-4.161.675-1.248h.008l-.038 1.001v4.408h.723z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(104.69 22.888)">
                                                                                <path
                                                                                    d="m0 0c-.257-.246-.413-.592-.471-1.04h2.879c-.051.44-.196.787-.437 1.035-.241.249-.56.374-.959.374-.418 0-.755-.123-1.012-.369m3.102-1.712h-3.581c.043-.479.204-.851.479-1.116.275-.264.632-.397 1.068-.397.349 0 .639.059.869.179.232.121.389.294.471.522l.637-.332c-.191-.334-.443-.59-.761-.766-.316-.176-.722-.266-1.216-.266-.715 0-1.277.218-1.685.654-.409.435-.613 1.036-.613 1.806 0 .769.195 1.371.584 1.806.389.436.942.654 1.658.654.443 0 .826-.099 1.149-.294.323-.196.567-.461.732-.795.165-.335.247-.709.247-1.125 0-.176-.013-.353-.038-.53"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(112.26 19.426)">
                                                                                <path
                                                                                    d="m0 0c-.316-.284-.725-.426-1.225-.426-.386 0-.702.105-.945.313-.244.208-.369.526-.376.955v2.904h-.949v.652h.949v1.136l.761.208v-1.344h1.757v-.652h-1.757v-2.772c0-.226.064-.398.194-.515s.303-.175.518-.175c.304 0 .573.116.807.35z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(120.64 23.824)">
                                                                                <path
                                                                                    d="m0 0-1.652-4.729h-.761l-1.339 3.765-1.264-3.765h-.759l-1.654 4.729h.846l1.196-3.85 1.292 3.85h.761l1.292-3.85 1.196 3.85z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(122.72 22.784)">
                                                                                <path
                                                                                    d="m0 0c-.272-.322-.409-.763-.409-1.324 0-.562.137-1.002.409-1.324.271-.321.648-.482 1.13-.482.481 0 .858.161 1.131.482.272.322.408.762.408 1.324 0 .561-.136 1.002-.408 1.324-.273.321-.65.482-1.131.482-.482 0-.859-.161-1.13-.482m2.816.482c.409-.435.613-1.037.613-1.806 0-.77-.204-1.371-.613-1.806-.408-.436-.97-.654-1.686-.654s-1.277.218-1.686.654c-.409.435-.613 1.036-.613 1.806 0 .769.204 1.371.613 1.806.409.436.97.654 1.686.654s1.278-.218 1.686-.654"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(130.46 23.824)">
                                                                                <path
                                                                                    d="m0 0-.152-.738c-.153.083-.352.124-.599.124-.203 0-.4-.059-.594-.176-.193-.116-.351-.293-.474-.529-.124-.237-.186-.522-.186-.857v-2.553h-.76v4.729h.618l.104-.776c.266.581.772.871 1.521.871.227 0 .401-.032.522-.095"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(133.48 21.432)">
                                                                                <path
                                                                                    d="m0 0-1.007-1.002v-1.334h-.76v6.904h.76v-4.626l2.46 2.451h.95l-1.852-1.845 1.967-2.884h-.922z"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(77 39.975)">
                                                                                <path
                                                                                    d="m0 0v-2.974c0-.552-.448-1.001-1-1.001h-19c-.552 0-1 .449-1 1.001v29.99c0 .552.447 1.001 1 1.001l18 .008c.552.001 1-.447 1-1.001v-3.002c0-.553-.448-1.001-1-1.001h-14v-8.979h11c.552 0 1-.448 1-1.001v-3.002c0-.553-.448-1.001-1-1.001h-11v-8.037h15c.552 0 1-.448 1-1.001"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(116 36)">
                                                                                <path
                                                                                    d="m0 0h-2.96c-.552 0-.999.447-1 .999l-.039 30c-.001.552.447 1.001 1 1.001h4.403c.367 0 .705-.201.88-.524l12.716-23.474v22.998c0 .552.448 1 1.001 1h3c.552 0 1-.448 1-1v-29.971c0-.552-.448-1-1-1h-4.417c-.36 0-.693.194-.871.508l-12.713 22.47v-22.007c0-.552-.448-1-1-1"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                            <g transform="translate(31,71)">
                                                                                <path
                                                                                    d="m0 0v-11.76l-1.34-3.24h-3.32l-1.34 3.24v11.76c0 .552.448 1 1 1h4c.552 0 1-.448 1-1"
                                                                                    style="fill:#6cc747" />
                                                                            </g>
                                                                            <g transform="translate(16.707,67.312)">
                                                                                <path
                                                                                    d="m0 0 8.295-8.071 1.343-3.239-2.347-2.347-3.239 1.343-8.071 8.295c-.381.392-.377 1.018.01 1.405l2.604 2.604c.387.387 1.013.391 1.405.01"
                                                                                    style="fill:#4eafe6" />
                                                                            </g>
                                                                            <g transform="translate(9,55)">
                                                                                <path
                                                                                    d="m0 0h11.76l3.24-1.34v-3.32l-3.24-1.34h-11.76c-.552 0-1 .448-1 1v4c0 .552.448 1 1 1"
                                                                                    style="fill:#e71294" />
                                                                            </g>
                                                                            <g transform="translate(12.468 40.711)">
                                                                                <path
                                                                                    d="m0 0 8.291 8.291 3.238 1.343 2.348-2.347-1.343-3.239-8.319-8.094c-.382-.372-.99-.379-1.38-.015l-2.81 2.623c-.414.386-.425 1.038-.025 1.438"
                                                                                    style="fill:#f46e25" />
                                                                            </g>
                                                                            <g transform="translate(25,33)">
                                                                                <path
                                                                                    d="m0 0v11.76l1.34 3.24h3.32l1.34-3.24v-11.76c0-.552-.448-1-1-1h-4c-.552 0-1 .448-1 1"
                                                                                    style="fill:#4eafe6" />
                                                                            </g>
                                                                            <g transform="translate(39.293,36.688)">
                                                                                <path
                                                                                    d="m0 0-8.295 8.071-1.343 3.239 2.347 2.347 3.239-1.343 8.071-8.295c.381-.392.377-1.018-.01-1.405l-2.604-2.604c-.387-.387-1.013-.391-1.405-.01"
                                                                                    style="fill:#6cc747" />
                                                                            </g>
                                                                            <g transform="translate(47,49)">
                                                                                <path
                                                                                    d="m0 0h-11.76l-3.24 1.34v3.32l3.24 1.34h11.76c.552 0 1-.448 1-1v-4c0-.552-.448-1-1-1"
                                                                                    style="fill:#f46e25" />
                                                                            </g>
                                                                            <g transform="translate(43.312,63.293)">
                                                                                <path
                                                                                    d="m0 0-8.071-8.295-3.239-1.343-2.347 2.347 1.343 3.239 8.295 8.071c.392.381 1.018.377 1.405-.01l2.604-2.604c.387-.387.391-1.013.01-1.405"
                                                                                    style="fill:#e71294" />
                                                                            </g>
                                                                            <g transform="translate(106.08 44.7)">
                                                                                <path
                                                                                    d="m0 0c0-1.86-.514-3.51-1.521-4.93-.997-1.4-2.427-2.5-4.26-3.27-1.802-.76-3.907-1.15-6.264-1.15-3.082 0-5.771.64-7.967 1.9-1.28.744-2.447 1.813-3.399 2.918-.38.44-.306 1.109.159 1.457l2.324 1.743c.451.339 1.085.229 1.418-.227.524-.717 1.093-1.301 1.885-1.811 1.491-.96 3.404-1.45 5.67-1.45 2.246 0 4.039.42 5.338 1.26 1.249.8 1.853 1.91 1.853 3.37 0 1.21-.524 2.16-1.591 2.88-1.138.77-3.233 1.44-6.234 1.99-.534.1-1.048.2-1.531.31-3.283.72-5.63 1.67-7.151 2.9-1.772 1.44-2.679 3.47-2.679 6.04 0 1.75.484 3.39 1.441 4.88.947 1.48 2.326 2.67 4.089 3.54 1.752.86 3.807 1.3 6.113 1.3 4.953 0 9.16-1.839 11.691-5.51.311-.452.231-1.065-.208-1.394l-2.358-1.768c-.468-.352-1.126-.217-1.446.272-.873 1.337-1.848 2.009-2.794 2.66-1.159.81-2.79 1.21-4.845 1.21-2.165 0-3.887-.46-5.106-1.38-1.189-.9-1.762-2.01-1.762-3.39 0-.9.211-1.62.664-2.19.453-.58 1.249-1.11 2.347-1.56 1.148-.47 2.78-.89 4.854-1.26.554-.1 1.088-.2 1.591-.32 3.233-.69 5.54-1.65 7.04-2.9 1.753-1.47 2.639-3.53 2.639-6.12"
                                                                                    style="fill:#040606" />
                                                                            </g>
                                                                        </g>
                                                                    </g>
                                                                    <path
                                                                        d="m149.26 261.91h-4.0847v-10.661l-2.9513 6.9184h-2.8336l-2.9513-6.9184v10.661h-3.8709v-15.922h4.7691l3.5822 7.9877 3.5715-7.9877h4.7691z"
                                                                        style="fill:#040606" />
                                                                    <path d="m156.13 261.91h-3.8495v-12.008h3.8495zm.10693-13.719h-4.0634v-2.9192h4.0634z"
                                                                        style="fill:#040606" />
                                                                    <path d="m162.5 261.91h-3.8495v-16.638h3.8495z" style="fill:#040606" />
                                                                    <path
                                                                        d="m173.13 258.78v-2.5022q-.78059.0642-1.6895.18178-.90891.10693-1.3794.25664-.57742.18178-.88752.53465-.2994.34217-.2994.90891 0 .37425.0642.6095.0642.23524.32079.4491.24594.21387.58812.3208.34218.0962 1.0693.0962.57743 0 1.1655-.23524.59881-.23525 1.0479-.6202zm0 1.8606q-.3101.23524-.7699.56673-.4598.33148-.86613.52396-.56673.25663-1.1762.37425-.6095.12832-1.3366.12832-1.7109 0-2.8657-1.0586-1.1548-1.0586-1.1548-2.7053 0-1.3152.58811-2.1493.58812-.83405 1.6681-1.3152 1.0693-.48118 2.6519-.68435 1.5826-.20317 3.2828-.29941v-.0642q0-.99446-.81267-1.3687-.81267-.38495-2.3952-.38495-.95168 0-2.0317.34218-1.08.33148-1.5505.51326h-.35287v-2.8978q.60951-.16039 1.9782-.37425 1.3794-.22456 2.7588-.22456 3.2828 0 4.737 1.0158 1.4649 1.0051 1.4649 3.1651v8.1695h-3.8174z"
                                                                        style="fill:#040606" />
                                                                    <path
                                                                        d="m190.64 261.91h-3.8709v-5.956q0-.72712-.0748-1.4436-.0748-.72712-.25663-1.0693-.21386-.39564-.63089-.57742-.40634-.18178-1.1442-.18178-.52395 0-1.0693.17108-.53465.17109-1.1655.54535v8.5116h-3.8495v-12.008h3.8495v1.3259q1.0265-.80197 1.9675-1.2297.95168-.42773 2.1065-.42773 1.9461 0 3.0368 1.1335 1.1014 1.1335 1.1014 3.3897z"
                                                                        style="fill:#040606" />
                                                                    <path
                                                                        d="m204.43 255.91q0 2.962-1.7323 4.6728-1.7216 1.7002-4.8439 1.7002t-4.8546-1.7002q-1.7216-1.7109-1.7216-4.6728 0-2.9834 1.7323-4.6836 1.743-1.7002 4.8439-1.7002 3.1438 0 4.8546 1.7109 1.7216 1.7109 1.7216 4.6728zm-4.737 2.9192q.37426-.4598.55604-1.1014.19247-.65227.19247-1.7964 0-1.0586-.19247-1.775-.19248-.71643-.53465-1.1442-.34218-.43841-.82337-.6202-.48118-.18178-1.0372-.18178t-.99445.1497q-.42772.14971-.82336.59881-.35287.41703-.56673 1.1442-.20317.72712-.20317 1.8285 0 .98375.18178 1.7109.18178.71643.53465 1.1548.34218.41702.81267.6095.48119.19247 1.0907.19247.52396 0 .99445-.17108.48119-.18179.81267-.59881z"
                                                                        style="fill:#040606" />
                                                                    <path
                                                                        d="m224.56 256.91q0 2.3525-1.9996 3.8281-1.9889 1.465-5.4107 1.465-1.9782 0-3.4538-.34218-1.465-.35287-2.7481-.88752v-3.8174h.4491q1.2725 1.0158 2.8444 1.5612 1.5826.54535 3.0368.54535.37426 0 .98376-.0642t.99445-.21386q.47049-.19248.7699-.48119.31009-.28871.31009-.85544 0-.52396-.4491-.89821-.43842-.38495-1.2939-.58812-.89821-.21386-1.9034-.39564-.99445-.19248-1.8713-.48119-2.0103-.65227-2.8978-1.7644-.87683-1.1228-.87683-2.7802 0-2.2241 1.9889-3.6249 1.9996-1.4115 5.1326-1.4115 1.5719 0 3.101.3101 1.5398.2994 2.6626.7592v3.6677h-.43841q-.96237-.7699-2.3632-1.2832-1.3901-.52396-2.8444-.52396-.51326 0-1.0265.0748-.50257.0642-.97306.25663-.41703.1604-.71643.49188-.29941.32079-.29941.73782 0 .63089.48119.97307.48118.33148 1.8178.6095.87683.18178 1.6788.35287.81267.17109 1.743.47049 1.8285.59881 2.6946 1.636.87683 1.0265.87683 2.6733z"
                                                                        style="fill:#040606" />
                                                                    <path
                                                                        d="m233.38 261.81q-.6202.16039-1.3152.24594-.69505.0962-1.7002.0962-2.2455 0-3.3469-.9089-1.0907-.90891-1.0907-3.1117v-5.6138h-1.5826v-2.6091h1.5826v-3.4325h3.8495v3.4325h3.6036v2.6091h-3.6036v4.2558q0 .63089.0107 1.1014.0107.4705.17109.84475.1497.37426.52396.59881.38495.21386 1.1121.21386.29941 0 .7806-.12831.49187-.12832.68435-.23525h.32079z"
                                                                        style="fill:#040606" />
                                                                    <path
                                                                        d="m242.68 258.78v-2.5022q-.7806.0642-1.6895.18178-.90891.10693-1.3794.25664-.57743.18178-.88752.53465-.29941.34217-.29941.90891 0 .37425.0642.6095.0642.23524.32079.4491.24594.21387.58812.3208.34217.0962 1.0693.0962.57742 0 1.1655-.23524.59881-.23525 1.0479-.6202zm0 1.8606q-.3101.23524-.7699.56673-.4598.33148-.86614.52396-.56673.25663-1.1762.37425-.6095.12832-1.3366.12832-1.7109 0-2.8657-1.0586t-1.1548-2.7053q0-1.3152.58812-2.1493.58812-.83405 1.6681-1.3152 1.0693-.48118 2.6519-.68435t3.2828-.29941v-.0642q0-.99446-.81267-1.3687-.81267-.38495-2.3952-.38495-.95168 0-2.0317.34218-1.08.33148-1.5505.51326h-.35287v-2.8978q.6095-.16039 1.9782-.37425 1.3794-.22456 2.7588-.22456 3.2828 0 4.737 1.0158 1.465 1.0051 1.465 3.1651v8.1695h-3.8174z"
                                                                        style="fill:#040606" />
                                                                    <path
                                                                        d="m255.37 261.81q-.6202.16039-1.3152.24594-.69505.0962-1.7002.0962-2.2455 0-3.3469-.9089-1.0907-.90891-1.0907-3.1117v-5.6138h-1.5826v-2.6091h1.5826v-3.4325h3.8495v3.4325h3.6036v2.6091h-3.6036v4.2558q0 .63089.0107 1.1014.0107.4705.17109.84475.1497.37426.52396.59881.38495.21386 1.1121.21386.29941 0 .78059-.12831.49188-.12832.68436-.23525h.32079z"
                                                                        style="fill:#040606" />
                                                                    <path
                                                                        d="m264.67 258.78v-2.5022q-.78059.0642-1.6895.18178-.90891.10693-1.3794.25664-.57743.18178-.88753.53465-.2994.34217-.2994.90891 0 .37425.0642.6095.0642.23524.32079.4491.24594.21387.58811.3208.34218.0962 1.0693.0962.57742 0 1.1655-.23524.59881-.23525 1.0479-.6202zm0 1.8606q-.31009.23524-.76989.56673-.4598.33148-.86614.52396-.56673.25663-1.1762.37425-.6095.12832-1.3366.12832-1.7109 0-2.8657-1.0586t-1.1548-2.7053q0-1.3152.58812-2.1493.58811-.83405 1.6681-1.3152 1.0693-.48118 2.6519-.68435t3.2828-.29941v-.0642q0-.99446-.81267-1.3687-.81267-.38495-2.3952-.38495-.95168 0-2.0317.34218-1.08.33148-1.5505.51326h-.35287v-2.8978q.6095-.16039 1.9782-.37425 1.3794-.22456 2.7588-.22456 3.2828 0 4.737 1.0158 1.4649 1.0051 1.4649 3.1651v8.1695h-3.8174z"
                                                                        style="fill:#040606" />
                                                                    <path d="m273.97 261.91h-3.8495v-16.638h3.8495z" style="fill:#040606" />
                                                                    <path
                                                                        d="m289.11 256.62h-8.8111q.0856 1.4115 1.0693 2.16.99446.74851 2.9192.74851 1.219 0 2.3632-.43841 1.1442-.43842 1.8071-.94099h.42772v3.0903q-1.3046.52396-2.4594.7592-1.1548.23525-2.5556.23525-3.6142 0-5.539-1.6253-1.9247-1.6253-1.9247-4.6301 0-2.9727 1.8178-4.7049 1.8285-1.743 5.0043-1.743 2.9299 0 4.4055 1.4863 1.4756 1.4756 1.4756 4.2558zm-3.8281-2.2562q-.0321-1.2083-.59881-1.8178-.56673-.60951-1.7644-.60951-1.1121 0-1.8285.57743-.71644.57742-.80198 1.8499z"
                                                                        style="fill:#040606" />
                                                                </g>
                                                            </svg>
                                            </div>
                                        </td>
                                        <td>
                                            <ul style="list-style-type: none;">
                                                <li><strong>ESN Milano Statale</strong></li>
                                                <li>via Festa del Perdono 7, Milano, 20122</li>
                                                <li>CF 97257990156 - P.IVA 06589680963</li>
                                            </ul>    
                                        </td>
                                    </tr>
                                </table>
                                <br/>
                                <br/>
                                <!--<></>--->
                                <!--Very bad styiling directly on the element!--->
                                <table style="width: 80%; border: .4px solid gray; border-collapse: collapse;">
                                    <tr style="background-color: lightgray; border: .4px solid gray;">
                                        <th style="text-align:left;" colspan='2'>Ricevuta n° ${dati.anno_fiscale}/${dati.numero_ricevuta}, registrata il ${dati.data_rilascio}</th>
                                    </tr>
                                    <tr>
                                        <td>Importo:</td>
                                        <td>€${dati.importo}</td>
                                    </tr>
                                    <tr style="border: .4px solid gray;">
                                        ${persona_dare_avere}
                                    </tr>
                                    <tr>
                                        <td>Per:</td>
                                        <td>${dati.causale}</td>
                                    </tr>
                                    <tr style="border: .4px solid gray;">
                                        <td>Canale:</td>
                                        <td>${dati.canale}</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                `
            this.html_pdfprev = pdfprev
            this.put_into_preview()
        }

        put_into_preview() {
            this.pdfprev_container.innerHTML = this.html_pdfprev
        }
    
        to_full_HTML() {
            const pdf_template_to_print = `
            <!DOCTYPE html>
            <head>
                <meta charset="UTF-8">
                <style>
                    @import url('https://fonts.googleapis.com/css?family=Lato&display=swap');
                    body {
                    width: 100%;
                    height: 100%;
                    margin: 0;
                    padding: 0;
                    background-color: #FAFAFA;
                    font: 12pt "Lato";
                    }
                    * {
                        box-sizing: border-box;
                        -moz-box-sizing: border-box;
                    }
                </style>
            </head>
            <body>
                ${this.html_pdfprev}
            </body>
            </html>
            `
            return pdf_template_to_print
        }

        HTML_to_PDF_dwl() {
            // TODO finish!
            const pdf = new jsPDF('p', 'pt', 'letter');
            // source can be HTML-formatted string, or a reference
            // to an actual DOM element from which the text will be scraped.
            const docum_body = this.to_full_HTML();

            // all coords and widths are in jsPDF instance's declared units
            // 'inches' in this case
            pdf.addHTML(docum_body,
                function() { 
                    pdf.save(`ricevuta_${this.dati.anno_fiscale}-${this.dati.numero_ricevuta}.pdf`);
                });
        }

        printPreview () {
        console.log("printPreview!");

        if (!this.validate_dati()) {
            alert("Dati inseriti non validi")
            return
        }
        const win = window.open("", "pdf download") // "status=1"
        let pdf_template_to_print = this.to_full_HTML()
        win.document.write(pdf_template_to_print)
        win.print()
        win.close()
        // this.HTML_to_PDF_dwl()
    }
    }

    const clear_inputs = () => {
        form_inputs.forEach((elem) => {
            elem.value = ""
        })
    }

    const inputs_for_membership_fee = () => {
        form_inputs[3].value = "Quota associativa"
        form_inputs[5].value = 10
    }

    const fattura = new Fattura()
    fattura.put(form_inputs)

    // Put event listeners
    form_inputs.forEach((elem) => {
        elem.addEventListener("change", () => {
            fattura.put(form_inputs)
        })
    })
    download_btn.addEventListener("click", () => fattura.printPreview())
</script>

</html>